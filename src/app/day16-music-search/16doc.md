# Day 16: Music Search App - ドキュメント

このドキュメントは、Day 16で作成した音楽検索アプリについて、プログラミングを始めたばかりの方向けに分かりやすく解説するものです。

## 1. このアプリは何？

一言でいうと、「**iTunes Storeの音楽を検索できるアプリ**」です。

好きなアーティストの名前（例: `Taylor Swift`）や、曲名（例: `Shake It Off`）を入力して検索ボタンを押すと、関連する曲のリストがジャケット写真付きで表示されます。再生ボタンを押せば、30秒程度の試聴もできます。

## 2. どうやって動いているの？ (アプリの仕組み)

このアプリは、いくつかの部品が連携して動いています。全体の流れを追いかけてみましょう。

1.  **画面の表示 (page.tsx)**
    *   ユーザーがこのページにアクセスすると、まず `page.tsx` というファイルが読み込まれます。これがこのアプリのメインページ（玄関）です。
    *   ここには、検索バーや検索結果を表示するための大枠が用意されています。

2.  **ユーザーの操作 (SearchBar.tsx)**
    *   ユーザーが検索バーに文字を入力し、「Search」ボタンを押します。
    *   この操作をきっかけに、「**APIを叩く**」という処理が始まります。

3.  **APIを叩く (musicApi.ts)**
    *   「APIを叩く」とは、外部のサービスに「この情報ください！」とお願いを出すことです。
    *   今回は、Appleが提供している「iTunes Search API」というサービスを利用しています。
    *   `utils/musicApi.ts` ファイルが、このAPIにお願いを出す役割を担っています。検索キーワードを付けて、「このキーワードに合う曲の情報をください」とリクエストを送ります。

4.  **データの受け取りと整形**
    *   APIは、検索結果を「JSON」という形式のデータで返してくれます。これは、コンピューターが読みやすいように整理された、ただのテキストデータです。
    *   `types.ts` ファイルには、このJSONデータがどんな形をしているか（どんな項目が含まれているか）を定義した「設計図」が書かれています。これがあることで、プログラムがデータを安全に扱うことができます。

5.  **画面への表示 (MusicCard.tsx)**
    *   APIから受け取ったデータ（曲のリスト）を元に、`page.tsx` は `MusicCard.tsx` という部品を、曲の数だけ繰り返し画面に表示します。
    *   `MusicCard.tsx` は、1曲分の情報を表示するための「カード」の役割を持つ部品です。ジャケット写真、曲名、アーティスト名などをきれいにレイアウトして表示します。

## 3. ファイルごとの役割まとめ

このアプリは、役割ごとにファイルが分かれています。これを「**コンポーネント指向**」と呼び、レゴブロックのように部品を組み合わせて大きなものを作る考え方です。

*   `C:\デスクトップ\github\100DaysOfCode\src/app/day16-music-search/`
    *   `page.tsx`: **このアプリのメインファイル**。全体の司令塔。各コンポーネントをここに配置して、ページ全体を組み立てています。
    *   `types.ts`: **データの設計図**。APIから受け取るデータの型（`iTunesItem`など）を定義しています。
    *   `components/`: **画面の部品（UIコンポーネント）** を入れておくフォルダ。
        *   `SearchBar.tsx`: 検索バーと検索ボタン。
        *   `MusicCard.tsx`: 1曲分の情報を表示するカード。
        *   `ErrorMessage.tsx`: エラーが発生した時に表示するメッセージ。
        *   `LoadingSpinner.tsx`: 検索中に表示するクルクル回るアニメーション。
        *   ...など
    *   `utils/`: **便利機能** を入れておくフォルダ。
        *   `musicApi.ts`: iTunes APIと通信するための専門家。

## 4. 初学者向けのポイント

### `useState` って何？

`page.tsx` の中にある `const [searchState, setSearchState] = useState(...)` という記述は、Reactの「**状態管理**」という機能です。

*   `searchState`: アプリの「現在の状態」を保存しておくための箱です。例えば、「今ローディング中か？」「検索結果は何か？」「エラーは出ているか？」といった情報がここに入ります。
*   `setSearchState`: `searchState` の中身を更新するための命令です。これを実行すると、画面が自動的に最新の状態に更新されます。

アプリが「記憶」を保ち、ユーザーの操作に応じて見た目を変化させることができるのは、この `useState` のおかげです。

### `async / await` って何？

`musicApi.ts` や `page.tsx` で使われている `async` / `await` は、**非同期処理**を分かりやすく書くための仕組みです。

APIとの通信には、少し時間がかかります（相手のサーバーからの返事を待つ必要があるため）。`await` を使うと、「**ここで処理が終わるまで待っててね**」とプログラムに指示できます。これにより、データを受け取ってから次の処理（画面表示など）に進む、という流れを簡単に書くことができます。

## 5. 改造してみよう！

このアプリを元に、自分で改造してみるのも良い学習になります。

*   **見た目を変えてみる**: `MusicCard.tsx` の中のCSS（`className="..."`の部分）をいじって、カードのデザインを変えてみましょう。
*   **表示する情報を増やす**: `types.ts` を見ると、`trackPrice`（曲の値段）や `releaseDate`（リリース日）など、まだ画面に表示していない情報がたくさんあります。これを `MusicCard.tsx` に追加して表示してみましょう。
*   **検索対象を変えてみる**: `utils/musicApi.ts` の `searchMusic` 関数や、`page.tsx` の `handleSearch` 関数を少し変更すると、音楽(music)だけでなく、映画(movie)や電子書籍(ebook)も検索できるようになります。

このドキュメントが、アプリの仕組みを理解する助けになれば嬉しいです！
